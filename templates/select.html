{% extends "base.html" %}

{% block content %}
<section class="centered">
    <a href="/">Return to Main Menu</a><br>
</section>
<form action="/select" method="POST">
    <h2>The SELECT query syntax:</h2>
    <p class="sample-syntax">
        SELECT <em>column_name_1, column_name_2, ...</em> FROM {{session['table']}}
        WHERE <em>condition</em>
    </p>
    <ul>Column names for the <span class="table-col-names">{{session['table']}}</span> table:
        {% for column in session['columns'] %}
            <li class="table-col-names">{{column[0]}}</li>
        {% endfor %}
    </ul>
    <!-- <label for="query_label">Enter your SQL query here:</label>
    <input id="query_label" class="query-input" name="sql_query" type="text" />
    <hr> -->
    <label>SELECT <input class="query-input" name="columns" type="text" placeholder="column_name_1, column_name_2, ..." /></label>
    <p>FROM <span class="table-col-names">{{session['table']}}</span></p>
    <label>WHERE <input class="query-input" name="condition" type="text" placeholder="condition"/></label>
    <section class="centered">
        <button type="submit">Submit</button>
        <button type="reset" class="clear">Clear Form</button>
    </section>
</form>
<hr>
{% if results %}
    <h2>{{sql_query}}</h2>
    {% if results != "error" %}
        <table>
            <tr>
                {% for column in session['selected_columns'] %}
                    <th class="centered">{{column.strip()}}</th>
                {% endfor %}
            </tr>
            {% for row in results %}
                <tr>
                    {% for entry in row %}
                        <td>{{entry}}</td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <h3 class="error">Sorry, there was a syntax error in your query.</h3>
    {% endif %}
{% endif %}
{% endblock %}